# Intel Arc GPU 训练指南

## 🎯 训练目标

使用3,000~5,000条已分类的日志数据，在Intel Arc GPU上进行深度学习训练，避免OOM（内存溢出）问题。

## 📊 数据概览

你的`DATA_OUTPUT`目录包含以下分类数据：
- **堆栈异常** (stack_exception): ~5,000条记录
- **数据库异常** (database_exception): ~1,000条记录  
- **连接问题** (connection_issue): ~700条记录

## 🚀 快速开始

### 1. 环境检查
```bash
cd logsense-arc-intel
python quick_start.py
```

### 2. 数据准备
```bash
python scripts/prepare_data.py
```

### 3. 开始训练
```bash
python start_training.py
```

### 4. 一键启动（推荐）
```bash
run_training.bat
```

## ⚙️ 训练配置

### 内存优化设置
- **批次大小**: 16（避免OOM）
- **嵌入维度**: 64（减小模型大小）
- **卷积核数量**: 64（减少参数）
- **Dropout**: 0.3（防止过拟合）

### 模型选择
- **TextCNN**: 适合日志分类，收敛快
- **FastText**: 轻量级，适合小数据集

## 📈 训练流程

### 阶段1: 数据准备
1. 加载所有分类数据
2. 平衡采样（每类最多1,500条）
3. 数据预处理和清洗
4. 保存为训练格式

### 阶段2: 模型训练
1. 自动检测Intel Arc GPU
2. 创建优化模型
3. 训练10个epoch
4. 早停机制防止过拟合
5. 保存最佳模型

### 阶段3: 性能评估
1. 测试集评估
2. 准确率统计
3. 模型保存

## 🔍 内存监控

### 实时监控
```bash
python scripts/memory_monitor.py --duration 300 --interval 10
```

### 监控指标
- GPU内存使用率
- 系统内存使用率
- 训练进度
- 模型性能

## 🛠️ 故障排除

### 常见问题

#### 1. OOM错误
**解决方案**:
- 减小批次大小（batch_size=8）
- 使用更小的模型配置
- 启用梯度累积

#### 2. GPU不可用
**解决方案**:
```bash
pip install intel-extension-for-pytorch
```

#### 3. 数据加载失败
**解决方案**:
- 检查CSV文件格式
- 确保列名正确
- 验证文件编码

### 性能优化

#### 1. 内存优化
- 使用较小的嵌入维度
- 减少卷积层数量
- 启用梯度裁剪

#### 2. 训练优化
- 使用学习率调度器
- 早停机制
- 数据增强

## 📊 预期结果

### 训练时间
- **CPU**: 30-60分钟
- **Intel Arc GPU**: 10-20分钟

### 性能指标
- **准确率**: 85-95%
- **内存使用**: <4GB GPU内存
- **训练速度**: 2-5倍CPU加速

## 🎯 下一步

### 模型部署
1. 导出ONNX格式
2. 使用OpenVINO优化
3. 部署REST API

### 持续改进
1. 收集更多数据
2. 尝试不同模型架构
3. 超参数调优

## 📞 技术支持

如遇问题，请检查：
1. Intel Extension for PyTorch安装
2. GPU驱动版本
3. 系统内存充足
4. 数据文件完整性

---

**祝训练顺利！** 🚀 